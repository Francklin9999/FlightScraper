// const test_data_flighthubData = {
//     "site": "Flighthub",
//     "texts": [
//       {
//         "price": "CAD 327.52",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/UAx2.png",
//           "airline": "United Airlines",
//           "duration": "1h 57m",
//           "combinedTime": "7:30pm-9:27pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/UAx2.png",
//           "airline": "United Airlines",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 332.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 57m",
//           "combinedTime": "7:30pm-9:27pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 372.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "1:10pm-2:34pm-8:30pm-10:20pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 420.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 57m",
//           "combinedTime": "7:30pm-9:27pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "3:55pm-5:39pm-7:30pm-8:53pm"
//         }
//       },
//       {
//         "price": "CAD 420.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 57m",
//           "combinedTime": "7:30pm-9:27pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "3:55pm-5:39pm-8:00pm-9:18pm"
//         }
//       },
//       {
//         "price": "CAD 433.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "10:10am-11:34am-1:15pm-3:00pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 433.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "9:10am-10:34am-1:15pm-3:00pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 433.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "0h 45m",
//           "combinedTime": "8:40am-9:25am-10:00am-11:08am-1:15pm-3:00pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 433.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "0h 45m",
//           "combinedTime": "7:55am-8:40am-9:20am-10:28am-1:15pm-3:00pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 433.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "0h 45m",
//           "combinedTime": "7:55am-8:40am-10:00am-11:08am-1:15pm-3:00pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 433.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "8:10am-9:34am-1:15pm-3:00pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 437.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 57m",
//           "combinedTime": "7:30pm-9:27pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "9:45am-11:29am-2:00pm-3:18pm"
//         }
//       },
//       {
//         "price": "CAD 453.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 57m",
//           "combinedTime": "7:30pm-9:27pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "9:45am-11:29am-4:00pm-5:23pm"
//         }
//       },
//       {
//         "price": "CAD 453.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 57m",
//           "combinedTime": "7:30pm-9:27pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "3:55pm-5:39pm-10:30pm-11:48pm"
//         }
//       },
//       {
//         "price": "CAD 453.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 57m",
//           "combinedTime": "7:30pm-9:27pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "3:55pm-5:39pm-11:30pm-12:48am"
//         }
//       },
//       {
//         "price": "CAD 461.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "1:10pm-2:34pm-8:30pm-10:20pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "3:55pm-5:39pm-7:30pm-8:53pm"
//         }
//       },
//       {
//         "price": "CAD 461.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "1:10pm-2:34pm-8:30pm-10:20pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "3:55pm-5:39pm-8:00pm-9:18pm"
//         }
//       },
//       {
//         "price": "CAD 466.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "7:10am-8:34am-1:15pm-3:00pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 27m",
//           "combinedTime": "10:05am-11:32am"
//         }
//       },
//       {
//         "price": "CAD 477.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "1:10pm-2:34pm-8:30pm-10:20pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "9:45am-11:29am-2:00pm-3:18pm"
//         }
//       },
//       {
//         "price": "CAD 486.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 57m",
//           "combinedTime": "7:30pm-9:27pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "9:45am-11:29am-5:00pm-6:23pm"
//         }
//       },
//       {
//         "price": "CAD 493.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "1:10pm-2:34pm-8:30pm-10:20pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "9:45am-11:29am-4:00pm-5:23pm"
//         }
//       },
//       {
//         "price": "CAD 493.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "1:10pm-2:34pm-8:30pm-10:20pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "3:55pm-5:39pm-10:30pm-11:48pm"
//         }
//       },
//       {
//         "price": "CAD 493.97",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 24m",
//           "combinedTime": "1:10pm-2:34pm-8:30pm-10:20pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/ACx2.png",
//           "airline": "Air Canada",
//           "duration": "1h 44m",
//           "combinedTime": "3:55pm-5:39pm-11:30pm-12:48am"
//         }
//       },
//       {
//         "price": "CAD 498.77",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/WSx2.png",
//           "airline": "Westjet",
//           "duration": "1h 50m",
//           "combinedTime": "6:00am-7:50am"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/WSx2.png",
//           "airline": "Westjet",
//           "duration": "2h 10m",
//           "combinedTime": "6:10pm-8:20pm-9:15pm-11:00pm"
//         }
//       },
//       {
//         "price": "CAD 498.77",
//         "departureData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/WSx2.png",
//           "airline": "Westjet",
//           "duration": "1h 55m",
//           "combinedTime": "12:25pm-2:20pm"
//         },
//         "returnData": {
//           "img": "https://cf-assets.flighthub.com/images/suppliersx2/WSx2.png",
//           "airline": "Westjet",
//           "duration": "2h 10m",
//           "combinedTime": "6:10pm-8:20pm-9:15pm-11:00pm"
//         }
//       }
//     ],
//     "url": "https://www.flighthub.com/flight/search?num_adults=1&num_children=0&num_infants=0&num_infants_lap=0&seat_class=Economy&type=roundtrip&campaign=1&seg0_from=YUL&seg0_to=JFK&seg0_date=2024-10-09&seg1_date=2024-11-09&seg1_from=JFK&seg1_to=YUL",
//     "adultNumber": 1,
//     "class": "Economy"
//   }

const parsePrice = (price) => {
    const numericPart = price.replace(/[^0-9.,]/g, '');
    const cleanPrice = numericPart.replace(/,/g, '');
    return parseFloat(cleanPrice);
};

const parseDurationToMinutes = (duration) => {
    const match = duration.match(/(\d+)h\s*(\d+)m/) || duration.match(/(\d+)m/);
    if (match) {
        const hours = parseInt(match[1] || 0, 10);
        const minutes = parseInt(match[2] || match[1], 10);
        return hours * 60 + minutes;
    }
    return 0;
};

export const transformFlighthubData = (data) => {
    const { site, texts, url, adultNumber, class: flightClass } = data;

    return texts.map(flight => {
        const departureDuration = parseDurationToMinutes(flight.departureData.duration);
        const returnDuration = parseDurationToMinutes(flight.returnData.duration);
        const totalDuration = departureDuration + returnDuration;

        return {
            site,
            price: parsePrice(flight.price),
            departureData: {
                ...flight.departureData,
                duration: departureDuration
            },
            returnData: {
                ...flight.returnData,
                duration: returnDuration
            },
            totalDuration,
            url,
            adultNumber,
            class: flightClass
        };
    });
};

// const transformedData = transformFlighthubData(test_data_flighthubData);
// console.log(transformedData);


