// const test_data_skyscannerData = {
//     "site": "SkyScanner",
//     "texts": [
//       {
//         "price": "C$328",
//         "img": "//www.skyscanner.net/images/airlines/favicon/AC.png",
//         "airline": "Air Canada",
//         "departureData": {
//           "time": "7:30 PMYUL - 9:27 PMJFK",
//           "duration": "1h 57",
//           "stop": ""
//         },
//         "returnData": {
//           "time": "10:05 AMJFK - 11:32 AMYUL",
//           "duration": "1h 27",
//           "stop": ""
//         }
//       },
//       {
//         "price": "C$428",
//         "img": "//www.skyscanner.net/images/airlines/favicon/AC.png",
//         "airline": "Air Canada",
//         "departureData": {
//           "time": "10:10 AMYUL - 3:00 PMJFK",
//           "duration": "4h 50",
//           "stop": "1 stop"
//         },
//         "returnData": {
//           "time": "10:05 AMJFK - 11:32 AMYUL",
//           "duration": "1h 27",
//           "stop": ""
//         }
//       },
//       {
//         "price": "C$428",
//         "img": "//www.skyscanner.net/images/airlines/favicon/AC.png",
//         "airline": "Air Canada",
//         "departureData": {
//           "time": "9:10 AMYUL - 3:00 PMJFK",
//           "duration": "5h 50",
//           "stop": "1 stop"
//         },
//         "returnData": {
//           "time": "10:05 AMJFK - 11:32 AMYUL",
//           "duration": "1h 27",
//           "stop": ""
//         }
//       },
//       {
//         "price": "C$517",
//         "img": "//www.skyscanner.net/images/airlines/favicon/WS.png",
//         "airline": "WestJet",
//         "departureData": {
//           "time": "3:13 PMYUL - 4:59 PMJFK",
//           "duration": "1h 46",
//           "stop": ""
//         },
//         "returnData": {
//           "time": "7:30 AMJFK - 11:58 AMYUL",
//           "duration": "4h 28",
//           "stop": "1 stop"
//         }
//       },
//       {
//         "price": "C$517",
//         "img": "//www.skyscanner.net/images/airlines/favicon/WS.png",
//         "airline": "WestJet",
//         "departureData": {
//           "time": "6:00 AMYUL - 7:50 AMJFK",
//           "duration": "1h 50",
//           "stop": ""
//         },
//         "returnData": {
//           "time": "7:30 AMJFK - 11:58 AMYUL",
//           "duration": "4h 28",
//           "stop": "1 stop"
//         }
//       },
//       {
//         "price": "C$793",
//         "img": "//www.skyscanner.net/images/airlines/favicon/AC.png",
//         "airline": "Air Canada",
//         "departureData": {
//           "time": "5:10 PMYUL - 10:20 PMJFK",
//           "duration": "5h 10",
//           "stop": "1 stop"
//         },
//         "returnData": {
//           "time": "10:05 AMJFK - 11:32 AMYUL",
//           "duration": "1h 27",
//           "stop": ""
//         }
//       },
//       {
//         "price": "C$491",
//         "img": "//www.skyscanner.net/images/airlines/favicon/WS.png",
//         "airline": "WestJet",
//         "departureData": {
//           "time": "6:00 AMYUL - 7:50 AMJFK",
//           "duration": "1h 50",
//           "stop": ""
//         },
//         "returnData": {
//           "time": "6:10 PMJFK - 11:00 PMYUL",
//           "duration": "4h 50",
//           "stop": "1 stop"
//         }
//       },
//       {
//         "price": "C$517",
//         "img": "//www.skyscanner.net/images/airlines/favicon/WS.png",
//         "airline": "WestJet",
//         "departureData": {
//           "time": "12:25 PMYUL - 2:20 PMJFK",
//           "duration": "1h 55",
//           "stop": ""
//         },
//         "returnData": {
//           "time": "7:30 AMJFK - 11:58 AMYUL",
//           "duration": "4h 28",
//           "stop": "1 stop"
//         }
//       },
//       {
//         "price": "C$844",
//         "img": "//www.skyscanner.net/images/airlines/favicon/DL.png",
//         "airline": "Delta",
//         "departureData": {
//           "time": "12:25 PMYUL - 2:20 PMJFK",
//           "duration": "1h 55",
//           "stop": ""
//         },
//         "returnData": {
//           "time": "6:10 PMJFK - 11:00 PMYUL",
//           "duration": "4h 50",
//           "stop": "1 stop"
//         }
//       },
//       {
//         "price": "C$491",
//         "img": "//www.skyscanner.net/images/airlines/favicon/WS.png",
//         "airline": "WestJet",
//         "departureData": {
//           "time": "3:13 PMYUL - 4:59 PMJFK",
//           "duration": "1h 46",
//           "stop": ""
//         },
//         "returnData": {
//           "time": "6:10 PMJFK - 11:00 PMYUL",
//           "duration": "4h 50",
//           "stop": "1 stop"
//         }
//       },
//       {
//         "price": "C$844",
//         "img": "//www.skyscanner.net/images/airlines/favicon/DL.png",
//         "airline": "Delta",
//         "departureData": {
//           "time": "6:00 AMYUL - 7:50 AMJFK",
//           "duration": "1h 50",
//           "stop": ""
//         },
//         "returnData": {
//           "time": "6:10 PMJFK - 11:00 PMYUL",
//           "duration": "4h 50",
//           "stop": "1 stop"
//         }
//       }
//     ],
//     "url": "https://www.skyscanner.ca/transport/vols/YUL/JFK/20241009/20241109/?adultsv2=1&cabinclass=Economy&childrenv2=&ref=home&rtn=1&preferdirects=false&outboundaltsenabled=false&inboundaltsenabled=false",
//     "adultNumber": 1,
//     "class": "Economy"
//   }

const durationToMinutes = (duration) => {
    const match = duration.match(/(\d+)h\s*(\d*)/);
    if (match) {
        return parseInt(match[1]) * 60 + (parseInt(match[2]) || 0);
    }
    return 0;
};

const priceToInteger = (price) => {
    return parseInt(price.replace(/[^0-9]/g, ''));
};

export const transformSkyscannerData = (data) => {
    return data.texts.map(flight => {
        const departureDuration = durationToMinutes(flight.departureData.duration);
        const returnDuration = durationToMinutes(flight.returnData.duration);
        const totalDuration = departureDuration + returnDuration;
        const price = priceToInteger(flight.price);

        return {
            site: data.site,
            price: price,
            img: flight.img,
            airline: flight.airline,
            departureData: {
                time: flight.departureData.time,
                duration: departureDuration
            },
            returnData: {
                time: flight.returnData.time,
                duration: returnDuration
            },
            totalDuration: totalDuration,
            url: data.url,
            adultNumber: data.adultNumber,
            class: data.class
        };
    });
};

// console.log(transformSkyscannerData(test_data_skyscannerData));